<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Support - Casino Roulette</title>
    <style>
        body { font-family: 'Arial', sans-serif; background: #1a1a1a; color: #ffd700; margin: 0; padding: 20px; height: 100vh; display: flex; justify-content: center; align-items: center; }
        .container { max-width: 800px; background: rgba(30, 30, 30, 0.95); padding: 20px; border-radius: 15px; box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); text-align: center; }
        .chat-box { background: #333; padding: 10px; margin: 5px; border-radius: 5px; text-align: left; }
        textarea { width: 100%; padding: 10px; border-radius: 5px; }
        button { padding: 8px 15px; background: #ffd700; color: #000; border: none; border-radius: 5px; cursor: pointer; }
    </style>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js"></script>
</head>
<body>
    <div class="container">
        <h1>ðŸ“ž Customer Support</h1>
        <div id="chatContainer"></div>
        <textarea id="messageInput" placeholder="á€žá€„á€·á€ºá€™á€±á€¸á€á€½á€”á€ºá€¸á€€á€­á€¯ á€›á€±á€¸á€•á€«..."></textarea>
        <button onclick="sendMessage()">ðŸ“© á€•á€­á€¯á€·á€™á€Šá€º</button>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AISyBlZ5wL6b_0wpcM6VEOTz-KQOYH-3E-peg",
            authDomain: "casino-roulette-opper.firebaseapp.com",
            projectId: "casino-roulette-opper",
            storageBucket: "casino-roulette-opper.firebasestorage.app",
            messagingSenderId: "444515283629",
            appId: "1:444515283629:web:343c7e50b8b25cd5dbcc24",
            measurementId: "G-QE8SNQ5HQQ",
            databaseURL: "https://casino-roulette-opper-default-rtdb.asia-southeast1.firebasedatabase.app/"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const analytics = firebase.analytics();
        const userId = localStorage.getItem('userId') || 'guest';
        const phone = localStorage.getItem('phone') ? atob(localStorage.getItem('phone')) : 'N/A';

        function displayMessages() {
            db.ref('supportMessages').on('value', snap => {
                const messages = snap.val() || {};
                const chatContainer = document.getElementById('chatContainer');
                chatContainer.innerHTML = '';
                Object.values(messages).forEach(msg => {
                    const div = document.createElement('div');
                    div.className = 'chat-box';
                    div.innerHTML = `<b>User ${msg.phone}:</b> ${msg.message} <br><small>${new Date(msg.timestamp).toLocaleString()}</small>`;
                    chatContainer.appendChild(div);
                });
            });
        }

        function sendMessage() {
            const message = document.getElementById('messageInput').value;
            if (!message) return;
            db.ref('supportMessages').push({ userId, phone, message, timestamp: Date.now() });
            document.getElementById('messageInput').value = '';
        }

        displayMessages();
    </script>
</body>
</html>